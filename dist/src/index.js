var Cr=Object.defineProperty,vr=Object.defineProperties;var xr=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var wr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable;var V=(e,r,t)=>r in e?Cr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,n=(e,r)=>{for(var t in r||(r={}))wr.call(r,t)&&V(e,t,r[t]);if(se)for(var t of se(r))kr.call(r,t)&&V(e,t,r[t]);return e},i=(e,r)=>vr(e,xr(r));var m=(e,r,t)=>(V(e,typeof r!="symbol"?r+"":r,t),t);import Nr from"react";import vt from"react-dom";import{createStore as xt,applyMiddleware as wt}from"redux";import kt from"redux-thunk";import{Provider as Rt}from"react-redux";import{combineReducers as Br}from"redux";var Rr=(e={},r)=>{switch(r.type){case"FETCH_USER_SUCCESS":return i(n({},e),{user:r.user,fetchUserError:!1});case"FETCH_USER_ERROR":return i(n({},e),{fetchUserError:!0});case"ADD_SONG_TO_LIBRARY_SUCCESS":return i(n({},e),{songAddedToLibrary:!0,songId:r.songId});case"ADD_SONG_TO_LIBRARY_ERROR":return i(n({},e),{songAddedToLibrary:!1});default:return e}},te=Rr;var br=(e={},r)=>{switch(r.type){case"SET_TOKEN":return i(n({},e),{token:r.token});default:return e}},oe=br;var Ir=(e={},r)=>{switch(r.type){case"FETCH_PLAYLIST_MENU_PENDING":return n({fetchPlaylistPending:!0},e);case"FETCH_PLAYLIST_MENU_SUCCESS":return n({playlistMenu:r.playlists,playlists:r.playlists,fetchPlaylistError:!1,fetchPlaylistPending:!1},e);case"ADD_PLAYLIST_ITEM":return i(n({},e),{playlists:[...e.playlists,r.playlist]});case"FETCH_PLAYLIST_MENU_ERROR":return n({fetchPlaylistError:!0,fetchPlaylistPending:!1},e);default:return e}},ne=Ir;var Hr={fetchSongsPending:!0,songPlaying:!1,timeElapsed:0,songId:0,viewType:"songs",songPaused:!0},Lr=(e=Hr,r)=>{switch(r.type){case"UPDATE_VIEW_TYPE":return i(n({},e),{viewType:r.view});case"FETCH_SONGS_PENDING":return i(n({},e),{fetchSongsPending:!0});case"FETCH_SONGS_SUCCESS":return i(n({},e),{songs:r.songs,fetchSongsError:!1,fetchSongsPending:!1,viewType:"songs"});case"FETCH_SONGS_ERROR":return i(n({},e),{fetchSongsError:!0,fetchSongsPending:!1});case"SEARCH_SONGS_PENDING":return i(n({},e),{searchSongsPending:!0});case"SEARCH_SONGS_SUCCESS":return i(n({},e),{songs:r.songs,searchSongsError:!1,searchSongsPending:!1,viewType:"search"});case"SEARCH_SONGS_ERROR":return i(n({},e),{searchSongsError:!0,searchSongsPending:!1});case"FETCH_RECENTLY_PLAYED_PENDING":return i(n({},e),{fetchSongsPending:!0});case"FETCH_RECENTLY_PLAYED_SUCCESS":return i(n({},e),{songs:r.songs,viewType:"Recently Played",fetchSongsError:!1,fetchSongsPending:!1});case"FETCH_RECENTLY_PLAYED_ERROR":return i(n({},e),{fetchSongsError:!0,fetchSongsPending:!1});case"FETCH_PLAYLIST_SONGS_PENDING":return i(n({},e),{fetchPlaylistSongsPending:!0});case"FETCH_PLAYLIST_SONGS_SUCCESS":return i(n({},e),{songs:r.songs,viewType:"playlist",fetchPlaylistSongsError:!1,fetchPlaylistSongsPending:!1});case"FETCH_PLAYLIST_SONGS_ERROR":return i(n({},e),{fetchPlaylistSongsError:!0,fetchPlaylistSongsPending:!1});case"FETCH_ARTIST_SONGS_PENDING":return i(n({},e),{fetchArtistSongsPending:!0});case"FETCH_ARTIST_SONGS_SUCCESS":return i(n({},e),{songs:r.songs,viewType:"Artist",fetchArtistSongsError:!1,fetchArtistSongsPending:!1});case"FETCH_ARTIST_SONGS_ERROR":return i(n({},e),{fetchArtistSongsError:!0,fetchArtistSongsPending:!1});case"PLAY_SONG":return i(n({},e),{songPlaying:!0,songDetails:r.song,songId:r.song.id,timeElapsed:0,songPaused:!1});case"STOP_SONG":return i(n({},e),{songPlaying:!1,songDetails:null,timeElapsed:0,songPaused:!0});case"PAUSE_SONG":return i(n({},e),{songPaused:!0});case"RESUME_SONG":return i(n({},e),{songPaused:!1});case"INCREASE_SONG_TIME":return i(n({},e),{timeElapsed:r.time});default:return e}},ie=Lr;var Or=(e={},r)=>{switch(r.type){case"FETCH_ALBUMS_PENDING":return i(n({},e),{fetchAlbumsPending:!0});case"FETCH_ALBUMS_SUCCESS":return i(n({},e),{albums:r.albums,fetchAlbumsError:!1,fetchAlbumsPending:!1});case"FETCH_ALBUMS_ERROR":return i(n({},e),{fetchAlbumsError:!0,fetchAlbumsPending:!1});default:return e}},ae=Or;var Ur={artistIds:""},Dr=(e=Ur,r)=>{switch(r.type){case"SET_ARTIST_IDS":return i(n({},e),{artistIds:r.artistIds});case"FETCH_ARTISTS_PENDING":return i(n({},e),{fetchArtistsPending:!0});case"FETCH_ARTISTS_SUCCESS":return i(n({},e),{artistList:r.artists,fetchArtistsError:!1,fetchArtistsPending:!1});case"FETCH_ARTISTS_ERROR":return i(n({},e),{fetchArtistsError:!0,fetchArtistsPending:!1});default:return e}},ue=Dr;var Fr={title:"Songs"},jr=(e=Fr,r)=>{switch(r.type){case"UPDATE_HEADER_TITLE":return i(n({},e),{title:r.title});default:return e}},pe=jr;var Gr=(e={},r)=>{switch(r.type){case"FETCH_CATEGORIES_SUCCESS":return i(n({},e),{view:r.categories.items,fetchCategoriesError:!1});case"FETCH_CATEGORIES_ERROR":return i(n({},e),{fetchCategoriesError:!0});case"FETCH_NEW_RELEASES_SUCCESS":return i(n({},e),{view:r.newReleases.items,fetchNewReleasesError:!1});case"FETCH_NEW_RELEASES_ERROR":return i(n({},e),{fetchNewReleasesError:!0});case"FETCH_FEATURED_SUCCESS":return i(n({},e),{view:r.featured.items,fetchFeaturedError:!1});case"FETCH_FEATURED_ERROR":return i(n({},e),{fetchFeaturedError:!0});default:return e}},ce=Gr;var Mr=(e={volume:100},r)=>{switch(r.type){case"UPDATE_VOLUME":return{volume:r.volume};default:return e}},le=Mr;var de=Br({userReducer:te,tokenReducer:oe,playlistReducer:ne,songsReducer:ie,albumsReducer:ae,artistsReducer:ue,uiReducer:pe,browseReducer:ce,soundReducer:le});import T,{Component as _t}from"react";import w from"prop-types";import{bindActionCreators as At}from"redux";import{connect as Pt}from"react-redux";var Yr=e=>({type:"FETCH_USER_SUCCESS",user:e}),qr=()=>({type:"FETCH_USER_ERROR"}),me=e=>r=>{let t=new Request("https://api.spotify.com/v1/me",{headers:new Headers({Authorization:"Bearer "+e})});fetch(t).then(s=>(s.statusText==="Unauthorized"&&(window.location.href="./"),s.json())).then(s=>{r(Yr(s))}).catch(s=>{r(qr(s))})},Vr=e=>({type:"ADD_SONG_TO_LIBRARY_SUCCESS",songId:e}),zr=()=>({type:"ADD_SONG_TO_LIBRARY_ERROR"}),fe=(e,r)=>t=>{let s=new Request(`https://api.spotify.com/v1/me/tracks?ids=${r}`,{method:"PUT",headers:new Headers({Authorization:"Bearer "+e})});fetch(s).then(o=>{o.ok&&t(Vr(r))}).catch(o=>{t(zr(o))})};var ge=e=>({type:"SET_TOKEN",token:e});import Ee from"lodash/uniqBy";var Wr=()=>({type:"FETCH_ARTISTS_PENDING"}),$r=e=>({type:"FETCH_ARTISTS_SUCCESS",artists:e}),Xr=()=>({type:"FETCH_ARTISTS_ERROR"}),Se=(e,r)=>t=>{let s=new Request(`https://api.spotify.com/v1/artists?ids=${r}`,{headers:new Headers({Authorization:"Bearer "+e})});t(Wr()),fetch(s).then(o=>o.json()).then(o=>{t($r(o))}).catch(o=>{t(Xr(o))})},Kr=()=>({type:"FETCH_ARTIST_SONGS_PENDING"}),Jr=e=>({type:"FETCH_ARTIST_SONGS_SUCCESS",songs:e}),Qr=()=>({type:"FETCH_ARTIST_SONGS_ERROR"}),he=(e,r)=>t=>{let s=new Request(`https://api.spotify.com/v1/artists/${e}/top-tracks?country=US`,{headers:new Headers({Authorization:"Bearer "+r})});t(Kr()),fetch(s).then(o=>(o.statusText==="Unauthorized"&&(window.location.href="./"),o.json())).then(o=>{o.items=o.tracks.map(u=>({track:u})),t(Jr(o.items))}).catch(o=>{t(Qr(o))})},ye=e=>({type:"SET_ARTIST_IDS",artistIds:e});var Zr=()=>({type:"FETCH_SONGS_PENDING"}),es=e=>({type:"FETCH_SONGS_SUCCESS",songs:e}),Te=()=>({type:"FETCH_SONGS_ERROR"}),O=e=>r=>{let t=new Request("https://api.spotify.com/v1/me/tracks?limit=50",{headers:new Headers({Authorization:"Bearer "+e})});r(Zr()),fetch(t).then(s=>(s.statusText==="Unauthorized"&&(window.location.href="./"),s.json())).then(s=>{let o=Ee(s.items,u=>u.track.artists[0].name).map(u=>u.track.artists[0].id).join(",");r(ye(o)),r(es(s.items))}).catch(s=>{r(Te(s))})},rs=()=>({type:"SEARCH_SONGS_PENDING"}),ss=e=>({type:"SEARCH_SONGS_SUCCESS",songs:e});var _e=(e,r)=>t=>{let s=new Request(`https://api.spotify.com/v1/search?q=${e}&type=track`,{headers:new Headers({Authorization:"Bearer "+r,Accept:"application/json"})});t(rs()),fetch(s).then(o=>(o.statusText==="Unauthorized"&&(window.location.href="./"),o.json())).then(o=>{o.items=o.tracks.items.map(u=>({track:u})),t(ss(o.items))}).catch(o=>{t(Te(o))})},ts=()=>({type:"FETCH_RECENTLY_PLAYED_PENDING"}),os=e=>({type:"FETCH_RECENTLY_PLAYED_SUCCESS",songs:e}),ns=()=>({type:"FETCH_RECENTLY_PLAYED_ERROR"}),Ae=e=>r=>{let t=new Request("https://api.spotify.com/v1/me/player/recently-played",{headers:new Headers({Authorization:"Bearer "+e})});r(ts()),fetch(t).then(s=>s.json()).then(s=>{s.items=Ee(s.items,o=>o.track.id),r(os(s.items))}).catch(s=>{r(ns(s))})},Pe=e=>({type:"PLAY_SONG",song:e}),Ne=()=>({type:"STOP_SONG"}),Ce=()=>({type:"PAUSE_SONG"}),ve=()=>({type:"RESUME_SONG"}),xe=e=>({type:"INCREASE_SONG_TIME",time:e}),U=e=>({type:"UPDATE_VIEW_TYPE",view:e});import $ from"react";import z from"react";import we from"prop-types";var ke=({userImage:e,displayName:r})=>z.createElement("div",{className:"user-details-container"},z.createElement("img",{alt:"user",className:"user-image",src:e}),z.createElement("p",{className:"user-name"},r));ke.propTypes={userImage:we.string,displayName:we.string};var Re=ke;import{connect as is}from"react-redux";var as=e=>({displayName:e.userReducer.user?e.userReducer.user.display_name:"",userImage:e.userReducer.user&&e.userReducer.user.images[0]?e.userReducer.user.images[0].url:""}),be=is(as)(Re);import b,{Component as us}from"react";import Ie from"prop-types";var W=class extends us{constructor(){super(...arguments);m(this,"state",{searchTerm:""});m(this,"updateSearchTerm",r=>{this.setState({searchTerm:r.target.value})})}render(){return b.createElement("div",{className:"track-search-container"},b.createElement("form",{onSubmit:()=>{this.props.searchSongs(this.state.searchTerm,this.props.token)}},b.createElement("input",{onChange:this.updateSearchTerm,type:"text",placeholder:"Search..."}),b.createElement("button",{onClick:r=>{r.preventDefault(),this.props.searchSongs(this.state.searchTerm,this.props.token)}},b.createElement("i",{className:"fa fa-search search","aria-hidden":"true"}))))}};W.propTypes={searchSongs:Ie.func,token:Ie.string};var He=W;import{connect as ps}from"react-redux";import{bindActionCreators as cs}from"redux";var ls=e=>({token:e.tokenReducer.token}),ds=e=>cs({searchSongs:_e},e),Le=ps(ls,ds)(He);var ms=()=>$.createElement("div",{className:"header"},$.createElement(Le,null),$.createElement(be,null)),Oe=ms;import Q from"react";import D from"prop-types";import f,{Component as fs}from"react";import E from"prop-types";import Ue from"moment";var X=class extends fs{constructor(){super(...arguments);m(this,"state",{timeElapsed:this.props.timeElapsed});m(this,"getSongIndex",()=>{let{songs:r,songDetails:t}=this.props;return r.map((o,u)=>{if(o.track===t)return u}).filter(o=>o!==void 0)[0]});m(this,"nextSong",()=>{let{songs:r,audioControl:t}=this.props,s=this.getSongIndex();s===r.length-1?t(r[0]):t(r[s+1])});m(this,"prevSong",()=>{let{songs:r,audioControl:t}=this.props,s=this.getSongIndex();t(s===0?r[r.length-1]:r[s-1])})}componentWillReceiveProps(r){r.songPlaying||clearInterval(this.state.intervalId),r.songPlaying&&r.timeElapsed===0&&(clearInterval(this.state.intervalId),this.calculateTime()),this.setState({timeElapsed:r.timeElapsed})}calculateTime(){let r=setInterval(()=>{this.state.timeElapsed===30?(clearInterval(this.state.intervalId),this.props.stopSong()):this.props.songPaused||this.props.increaseSongTime(this.state.timeElapsed+1)},1e3);this.setState({intervalId:r})}render(){let r=this.props.songPaused?"fa fa-play-circle-o play-btn":"fa fa-pause-circle-o pause-btn";return f.createElement("div",{className:"song-player-container"},f.createElement("div",{className:"song-details"},f.createElement("p",{className:"song-name"},this.props.songName),f.createElement("p",{className:"artist-name"},this.props.artistName)),f.createElement("div",{className:"song-controls"},f.createElement("div",{onClick:this.prevSong,className:"reverse-song"},f.createElement("i",{className:"fa fa-step-backward reverse","aria-hidden":"true"})),f.createElement("div",{className:"play-btn"},f.createElement("i",{onClick:this.props.songPaused?this.props.resumeSong:this.props.pauseSong,className:"fa play-btn"+r,"aria-hidden":"true"})),f.createElement("div",{onClick:this.nextSong,className:"next-song"},f.createElement("i",{className:"fa fa-step-forward forward","aria-hidden":"true"}))),f.createElement("div",{className:"song-progress-container"},f.createElement("p",{className:"timer-start"},Ue().minutes(0).second(this.state.timeElapsed).format("m:ss")),f.createElement("div",{className:"song-progress"},f.createElement("div",{style:{width:this.state.timeElapsed*16.5},className:"song-expired"})),f.createElement("p",{className:"timer-end"},Ue().minutes(0).second(30-this.state.timeElapsed).format("m:ss"))))}};X.propTypes={timeElapsed:E.number,songPlaying:E.bool,songPaused:E.bool,songName:E.string,artistName:E.string,stopSong:E.func,resumeSong:E.func,increaseSongTime:E.func,pauseSong:E.func,songs:E.array,songDetails:E.object,audioControl:E.func};var De=X;import{connect as gs}from"react-redux";import{bindActionCreators as Ss}from"redux";var hs=e=>({songName:e.songsReducer.songDetails?e.songsReducer.songDetails.name:"",artistName:e.songsReducer.songDetails?e.songsReducer.songDetails.artists[0].name:"",songPlaying:e.songsReducer.songPlaying,timeElapsed:e.songsReducer.timeElapsed,songPaused:e.songsReducer.songPaused,songDetails:e.songsReducer.songDetails,songs:e.songsReducer.songs}),ys=e=>Ss({increaseSongTime:xe},e),Fe=gs(hs,ys)(De);import K,{Component as Es}from"react";import je from"prop-types";var J=class extends Es{constructor(r){super(r);m(this,"updateVolume",r=>{this.setState({volume:r.target.value}),this.props.updateVolume(Math.ceil(r.target.value/10)*10)});this.state={volume:r.volume}}render(){return K.createElement("div",{className:"volume-container"},K.createElement("i",{className:"fa fa-volume-up","aria-hidden":"true"}),K.createElement("input",{className:"volume",type:"range",min:0,max:100,value:this.state.volume,onChange:this.updateVolume}))}};J.propTypes={volume:je.number,updateVolume:je.func};var Ge=J;import{connect as Ts}from"react-redux";import{bindActionCreators as _s}from"redux";var Me=e=>({type:"UPDATE_VOLUME",volume:e});var As=e=>({volume:e.soundReducer.volume}),Ps=e=>_s({updateVolume:Me},e),Be=Ts(As,Ps)(Ge);var Ye=({stopSong:e,pauseSong:r,resumeSong:t,audioControl:s})=>Q.createElement("div",{className:"footer"},Q.createElement(Fe,{stopSong:e,pauseSong:r,resumeSong:t,audioControl:s}),Q.createElement(Be,null));Ye.propTypes={stopSong:D.func,pauseSong:D.func,resumeSong:D.func,audioControl:D.func};var qe=Ye;import Z,{Component as Ns}from"react";import C from"prop-types";var ee=class extends Ns{componentWillReceiveProps(r){r.userId!==""&&r.token!==""&&this.props.fetchPlaylistsMenu(r.userId,r.token)}renderPlaylists(){return this.props.playlistMenu.map(r=>Z.createElement("li",{onClick:()=>{this.props.fetchPlaylistSongs(r.owner.id,r.id,this.props.token),this.props.updateHeaderTitle(r.name)},className:this.props.title===r.name?"active side-menu-item":"side-menu-item",key:r.id},r.name))}render(){return Z.createElement("div",{className:"user-playlist-container"},Z.createElement("h3",{className:"user-playlist-header"},"Playlists"),this.props.playlistMenu&&this.renderPlaylists())}};ee.propTypes={userId:C.string,token:C.string,title:C.string,playlistMenu:C.oneOfType([C.string,C.array]),fetchPlaylistsMenu:C.func,fetchPlaylistSongs:C.func,updateHeaderTitle:C.func};var Ve=ee;import{connect as Is}from"react-redux";import{bindActionCreators as Hs}from"redux";import Cs from"lodash/uniqBy";var vs=()=>({type:"FETCH_PLAYLIST_MENU_PENDING"}),xs=e=>({type:"FETCH_PLAYLIST_MENU_SUCCESS",playlists:e}),ws=()=>({type:"FETCH_PLAYLIST_MENU_ERROR"}),ze=e=>({type:"ADD_PLAYLIST_ITEM",playlist:e}),We=(e,r)=>t=>{let s=new Request(`https://api.spotify.com/v1/users/${e}/playlists`,{headers:new Headers({Authorization:"Bearer "+r})});t(vs()),fetch(s).then(o=>(o.statusText==="Unauthorized"&&(window.location.href="./"),o.json())).then(o=>{t(xs(o.items))}).catch(o=>{t(ws(o))})},ks=()=>({type:"FETCH_PLAYLIST_SONGS_PENDING"}),Rs=e=>({type:"FETCH_PLAYLIST_SONGS_SUCCESS",songs:e}),bs=()=>({type:"FETCH_PLAYLIST_SONGS_ERROR"}),F=(e,r,t)=>s=>{let o=new Request(`https://api.spotify.com/v1/users/${e}/playlists/${r}/tracks`,{headers:new Headers({Authorization:"Bearer "+t})});s(ks()),fetch(o).then(u=>u.json()).then(u=>{u.items=Cs(u.items,S=>S.track.id),s(Rs(u.items))}).catch(u=>{s(bs(u))})};var _=e=>({type:"UPDATE_HEADER_TITLE",title:e});var Ls=e=>({userId:e.userReducer.user?e.userReducer.user.id:"",playlistMenu:e.playlistReducer.playlistMenu?e.playlistReducer.playlistMenu:"",token:e.tokenReducer.token?e.tokenReducer.token:"",title:e.uiReducer.title}),Os=e=>Hs({fetchPlaylistsMenu:We,fetchPlaylistSongs:F,updateHeaderTitle:_},e),$e=Is(Ls,Os)(Ve);import R from"react";import j from"prop-types";import a,{Component as Us}from"react";import d from"prop-types";import Ds from"moment";var re=class extends Us{componentWillReceiveProps(r){r.token!==""&&!r.fetchSongsError&&r.fetchSongsPending&&r.viewType==="songs"&&this.props.fetchSongs(r.token)}msToMinutesAndSeconds(r){let t=Math.floor(r/6e4),s=(r%6e4/1e3).toFixed(0);return t+":"+(s<10?"0":"")+s}renderSongs(){return this.props.songs.map((r,t)=>{let s=r.track.id===this.props.songId&&!this.props.songPaused?"fa-pause-circle-o":"fa-play-circle-o";return a.createElement("li",{className:r.track.id===this.props.songId?"active user-song-item":"user-song-item",key:t},a.createElement("div",{onClick:()=>{r.track.id===this.props.songId&&this.props.songPlaying&&this.props.songPaused?this.props.resumeSong():this.props.songPlaying&&!this.props.songPaused&&r.track.id===this.props.songId?this.props.pauseSong():this.props.audioControl(r)},className:"play-song"},a.createElement("i",{className:`fa ${s} play-btn`,"aria-hidden":"true"})),this.props.viewType!=="songs"&&a.createElement("p",{className:"add-song",onClick:()=>{this.props.addSongToLibrary(this.props.token,r.track.id)}},this.props.songAddedId===r.track.id?a.createElement("i",{className:"fa fa-check add-song","aria-hidden":"true"}):a.createElement("i",{className:"fa fa-plus add-song","aria-hidden":"true"})),this.props.viewType==="songs"&&a.createElement("p",{className:"add-song"},a.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),a.createElement("div",{className:"song-title"},a.createElement("p",null,r.track.name)),a.createElement("div",{className:"song-artist"},a.createElement("p",null,r.track.artists[0].name)),a.createElement("div",{className:"song-album"},a.createElement("p",null,r.track.album.name)),a.createElement("div",{className:"song-added"},a.createElement("p",null,Ds(r.added_at).format("YYYY-MM-DD"))),a.createElement("div",{className:"song-length"},a.createElement("p",null,this.msToMinutesAndSeconds(r.track.duration_ms))))})}render(){return a.createElement("div",null,a.createElement("div",{className:"song-header-container"},a.createElement("div",{className:"song-title-header"},a.createElement("p",null,"Title")),a.createElement("div",{className:"song-artist-header"},a.createElement("p",null,"Artist")),a.createElement("div",{className:"song-album-header"},a.createElement("p",null,"Album")),a.createElement("div",{className:"song-added-header"},a.createElement("i",{className:"fa fa-calendar-plus-o","aria-hidden":"true"})),a.createElement("div",{className:"song-length-header"},a.createElement("p",null,a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"})))),this.props.songs&&!this.props.fetchSongsPending&&!this.props.fetchPlaylistSongsPending&&this.renderSongs())}};re.propTypes={viewType:d.string,token:d.string,songAddedId:d.string,songId:d.oneOfType([d.string,d.number]),songs:d.oneOfType([d.string,d.array]),fetchSongsError:d.bool,fetchSongsPending:d.bool,fetchPlaylistSongsPending:d.bool,fetchSongs:d.func,audioControl:d.func,songPaused:d.bool,songPlaying:d.bool,resumeSong:d.func,pauseSong:d.func,addSongToLibrary:d.func};var Xe=re;import{connect as Fs}from"react-redux";import{bindActionCreators as js}from"redux";var Gs=e=>({token:e.tokenReducer.token?e.tokenReducer.token:"",songs:e.songsReducer.songs?e.songsReducer.songs:"",fetchSongsError:e.songsReducer.fetchSongsError,fetchSongsPending:e.songsReducer.fetchSongsPending,fetchPlaylistSongsPending:e.songsReducer.fetchPlaylistSongsPending,songPlaying:e.songsReducer.songPlaying,songPaused:e.songsReducer.songPaused,songId:e.songsReducer.songId,songAddedId:e.userReducer.songId||"",viewType:e.songsReducer.viewType}),Ms=e=>js({fetchSongs:O,addSongToLibrary:fe},e),Ke=Fs(Gs,Ms)(Xe);import A from"react";import Je from"prop-types";var Qe=({songs:e,audioControl:r})=>A.createElement("ul",{className:"album-view-container"},(()=>e.map((s,o)=>A.createElement("li",{onClick:()=>{r(s)},className:"album-item",key:o},A.createElement("div",null,A.createElement("div",{className:"album-image"},A.createElement("img",{alt:"album",src:s.track.album.images[0].url}),A.createElement("div",{className:"play-song"},A.createElement("i",{className:"fa fa-play-circle-o play-btn","aria-hidden":"true"}))),A.createElement("div",{className:"album-details"},A.createElement("p",{className:"album-name"},s.track.album.name),A.createElement("p",{className:"artist-name"},s.track.album.artists[0].name))))))());Qe.propTypes={songs:Je.array,audioControl:Je.func};var Ze=Qe;import{connect as Bs}from"react-redux";import Ys from"lodash/uniqBy";var qs=e=>({songs:e.songsReducer.songs?Ys(e.songsReducer.songs,t=>t.track.album.name):""}),er=Bs(qs)(Ze);import v from"react";import k from"prop-types";var rr=({artists:e,fetchArtistSongs:r,token:t,updateHeaderTitle:s})=>v.createElement("ul",{className:"artist-view-container"},e&&(()=>e.map((u,S)=>{let c=(l,h)=>{r(l.id,h),s(l.name)};return v.createElement("li",{onClick:()=>{c(u,t)},className:"artist-item",key:S},v.createElement("a",null,v.createElement("div",null,v.createElement("div",{className:"artist-image"},v.createElement("img",{alt:"artist",src:u.images[0]?u.images[0].url:""})),v.createElement("div",{className:"artist-details"},v.createElement("p",null,u.name)))))}))());rr.propTypes={artists:k.oneOfType([k.string,k.array]),fetchArtistSongs:k.func,token:k.string,updateHeaderTitle:k.func};var sr=rr;import{connect as Vs}from"react-redux";import{bindActionCreators as zs}from"redux";var Ws=e=>({token:e.tokenReducer.token?e.tokenReducer.token:"",artists:e.artistsReducer.artistList?e.artistsReducer.artistList.artists:""}),$s=e=>zs({fetchArtistSongs:he,updateHeaderTitle:_},e),tr=Vs(Ws,$s)(sr);import I from"react";import x from"prop-types";var or=({view:e,viewType:r,token:t,fetchPlaylistSongs:s,updateHeaderTitle:o,addPlaylistItem:u})=>{let S;return e&&(S=e.map((c,l)=>I.createElement("li",{onClick:r==="Featured"?()=>{u(c),s(c.owner.id,c.id,t),o(c.name)}:null,className:"category-item",key:l},I.createElement("div",{className:"category-image"},I.createElement("img",{alt:"category",src:c.icons?c.icons[0].url:c.images[0].url}),r==="Genres"&&I.createElement("p",{className:"category-name"},c.name))))),I.createElement("ul",{className:"browse-view-container"},S)};or.propTypes={view:x.oneOfType([x.string,x.array]),viewType:x.string,token:x.string,fetchPlaylistSongs:x.func,updateHeaderTitle:x.func,addPlaylistItem:x.func};var nr=or;import{connect as Xs}from"react-redux";import{bindActionCreators as Ks}from"redux";var Js=e=>({view:e.browseReducer.view,viewType:e.songsReducer.viewType,token:e.tokenReducer.token}),Qs=e=>Ks({fetchPlaylistSongs:F,updateHeaderTitle:_,addPlaylistItem:ze},e),ir=Xs(Js,Qs)(nr);var ar=({headerTitle:e,audioControl:r,resumeSong:t,pauseSong:s})=>R.createElement(R.Fragment,null,e==="Albums"?R.createElement(er,{audioControl:r}):e==="Artists"?R.createElement(tr,null):e==="Browse"?R.createElement(ir,null):R.createElement(Ke,{resumeSong:t,pauseSong:s,audioControl:r}));ar.propTypes={headerTitle:j.string,audioControl:j.func,resumeSong:j.func,pauseSong:j.func};var ur=ar;import{connect as Zs}from"react-redux";var et=e=>({headerTitle:e.uiReducer.title}),pr=Zs(et)(ur);import cr from"react";import rt from"prop-types";var lr=e=>cr.createElement("div",{className:"album-artwork-container"},cr.createElement("img",{alt:"artwork",className:"album-artwork",src:e.albumImage}));lr.propTypes={albumArtwork:rt.string};var dr=lr;import{connect as st}from"react-redux";var tt=e=>({albumImage:e.songsReducer.songDetails?e.songsReducer.songDetails.album.images[0].url:""}),mr=st(tt)(dr);import p from"react";import g from"prop-types";var fr=({pauseSong:e,resumeSong:r,fetchCategories:t,fetchNewReleases:s,fetchFeatured:o,updateHeaderTitle:u,updateViewType:S,songPaused:c,headerTitle:l,viewType:h,playlists:B,token:L,artists:Y})=>{let N,y;return h==="playlist"&&(N=B.filter(q=>q.name===l)[0]),h==="Artist"&&Y.length>0&&(y=Y.filter(q=>q.name===l)[0]),p.createElement("div",{className:"section-title"},h==="playlist"&&p.createElement("div",{className:"playlist-title-container"},p.createElement("div",{className:"playlist-image-container"},p.createElement("img",{alt:"playlist",className:"playlist-image",src:N.images[0]?N.images[0].url:null})),p.createElement("div",{className:"playlist-info-container"},p.createElement("p",{className:"playlist-text"},"PLAYLIST"),p.createElement("h3",{className:"header-title"},l),p.createElement("p",{className:"created-by"},"Created By: ",p.createElement("span",{className:"lighter-text"},N.owner.display_name)," - ",N.tracks.total," songs"),p.createElement("button",{onClick:c?r:e,className:"main-pause-play-btn"},c?"PLAY":"PAUSE"))),h==="Artist"&&y&&p.createElement("div",null,p.createElement("div",{className:"current-artist-header-container"},p.createElement("img",{alt:"current-artist",className:"current-artist-image",src:y.images[0].url}),p.createElement("div",{className:"current-artist-info"},p.createElement("p",null,"Artist from your library"),p.createElement("h3",null,y.name))),p.createElement("button",{onClick:c?r:e,className:"main-pause-play-btn artist-button"},c?"PLAY":"PAUSE")),(l==="Songs"||l==="Recently Played"||l==="Albums"||l==="Artists")&&p.createElement("div",null,p.createElement("h3",{className:"header-title"},l),l!=="Artists"&&p.createElement("button",{onClick:c?r:e,className:"main-pause-play-btn"},c?"PLAY":"PAUSE")),l==="Browse"&&p.createElement("div",null,p.createElement("h3",{className:"header-title"},l),p.createElement("div",{className:"browse-headers"},p.createElement("p",{className:h==="Genres"?"active":"",onClick:()=>{t(L),S("Genres"),u("Browse")}},"Genres"),p.createElement("p",{className:h==="New Releases"?"active":"",onClick:()=>{s(L),S("New Releases"),u("Browse")}},"New Releases"),p.createElement("p",{className:h==="Featured"?"active":"",onClick:()=>{o(L),S("Featured"),u("Browse")}},"Featured"))))};fr.propTypes={pauseSong:g.func,resumeSong:g.func,fetchCategories:g.func,fetchNewReleases:g.func,fetchFeatured:g.func,updateHeaderTitle:g.func,updateViewType:g.func,songPaused:g.bool,headerTitle:g.string,viewType:g.string,playlists:g.array,playlistMenu:g.array,token:g.string,artists:g.array};var gr=fr;import{bindActionCreators as ct}from"redux";import{connect as lt}from"react-redux";var ot=e=>({type:"FETCH_CATEGORIES_SUCCESS",categories:e}),nt=()=>({type:"FETCH_CATEGORIES_ERROR"}),Sr=e=>r=>{let t=new Request("https://api.spotify.com/v1/browse/categories",{headers:new Headers({Authorization:"Bearer "+e})});fetch(t).then(s=>s.json()).then(s=>{r(ot(s.categories))}).catch(s=>{r(nt(s))})},it=e=>({type:"FETCH_NEW_RELEASES_SUCCESS",newReleases:e}),at=()=>({type:"FETCH_NEW_RELEASES_ERROR"}),hr=e=>r=>{let t=new Request("https://api.spotify.com/v1/browse/new-releases",{headers:new Headers({Authorization:"Bearer "+e})});fetch(t).then(s=>s.json()).then(s=>{r(it(s.albums))}).catch(s=>{r(at(s))})},ut=e=>({type:"FETCH_FEATURED_SUCCESS",featured:e}),pt=()=>({type:"FETCH_FEATURED_ERROR"}),G=e=>r=>{let t=new Request("https://api.spotify.com/v1/browse/featured-playlists",{headers:new Headers({Authorization:"Bearer "+e})});fetch(t).then(s=>s.json()).then(s=>{r(ut(s.playlists))}).catch(s=>{r(pt(s))})};var dt=e=>({songPaused:e.songsReducer.songPaused,headerTitle:e.uiReducer.title,viewType:e.songsReducer.viewType,playlists:e.playlistReducer.playlists,artists:e.artistsReducer.artistList?e.artistsReducer.artistList.artists:[],token:e.tokenReducer.token}),mt=e=>ct({fetchCategories:Sr,fetchNewReleases:hr,updateHeaderTitle:_,updateViewType:U,fetchFeatured:G},e),yr=lt(dt,mt)(gr);import H from"react";import P from"prop-types";var Er=({updateHeaderTitle:e,updateViewType:r,fetchFeatured:t,fetchRecentlyPlayed:s,fetchSongs:o,fetchAlbums:u,fetchArtists:S,token:c,title:l,artistIds:h})=>{let B=N=>{e(N),r(N)};return H.createElement("ul",{className:"side-menu-container"},H.createElement("li",{onClick:()=>{e("Browse"),r("Featured"),t(c)},className:l==="Browse"?"active side-menu-item":"side-menu-item"},"Browse"),H.createElement("li",{className:"side-menu-item radio"},"Radio"),H.createElement("h3",{className:"user-library-header"},"Your Library"),(()=>[{name:"Recently Played",action:s},{name:"Songs",action:o},{name:"Albums",action:u},{name:"Artists",action:S,getArtists:!0}].map(y=>H.createElement("li",{key:y.name,className:l===y.name?"active side-menu-item":"side-menu-item",onClick:()=>{y.getArtists?y.action(c,h):y.action(c),B(y.name)}},y.name)))())};Er.propTypes={updateHeaderTitle:P.func,updateViewType:P.func,fetchFeatured:P.func,fetchRecentlyPlayed:P.func,fetchSongs:P.func,fetchAlbums:P.func,fetchArtists:P.func,token:P.string,artistIds:P.string,title:P.string};var Tr=Er;import{connect as ht}from"react-redux";import{bindActionCreators as yt}from"redux";var ft=()=>({type:"FETCH_ALBUMS_PENDING"}),gt=e=>({type:"FETCH_ALBUMS_SUCCESS",albums:e}),St=()=>({type:"FETCH_ALBUMS_ERROR"}),_r=e=>r=>{let t=new Request("https://api.spotify.com/v1/me/albums",{headers:new Headers({Authorization:"Bearer "+e})});r(ft()),fetch(t).then(s=>s.json()).then(s=>{r(gt(s.items))}).catch(s=>{r(St(s))})};var Et=e=>({userId:e.userReducer.user?e.userReducer.user.id:"",token:e.tokenReducer.token?e.tokenReducer.token:"",artistIds:e.artistsReducer.artistIds,title:e.uiReducer.title}),Tt=e=>yt({fetchRecentlyPlayed:Ae,fetchSongs:O,fetchAlbums:_r,fetchArtists:Se,fetchFeatured:G,updateViewType:U,updateHeaderTitle:_},e),Ar=ht(Et,Tt)(Tr);var M=class extends _t{constructor(){super(...arguments);m(this,"stopSong",()=>{this.audio&&(this.props.stopSong(),this.audio.pause())});m(this,"pauseSong",()=>{this.audio&&(this.props.pauseSong(),this.audio.pause())});m(this,"resumeSong",()=>{this.audio&&(this.props.resumeSong(),this.audio.play())});m(this,"audioControl",r=>{let{playSong:t,stopSong:s}=this.props;this.audio===void 0?(t(r.track),this.audio=new Audio(r.track.preview_url),this.audio.play()):(s(),this.audio.pause(),t(r.track),this.audio=new Audio(r.track.preview_url),this.audio.play())})}componentDidMount(){let r={},t,s=/([^&;=]+)=?([^&;]*)/g,o=window.location.hash.substring(1);for(;t=s.exec(o);)r[t[1]]=decodeURIComponent(t[2]);r.access_token?this.props.setToken(r.access_token):window.location.href="https://accounts.spotify.com/authorize?client_id=230be2f46909426b8b80cac36446b52a&scope=playlist-read-private%20playlist-read-collaborative%20playlist-modify-public%20user-read-recently-played%20playlist-modify-private%20ugc-image-upload%20user-follow-modify%20user-follow-read%20user-library-read%20user-library-modify%20user-read-private%20user-read-email%20user-top-read%20user-read-playback-state&response_type=token&redirect_uri=http://localhost:3000/callback"}componentWillReceiveProps(r){r.token&&this.props.fetchUser(r.token),this.audio!==void 0&&(this.audio.volume=r.volume/100)}render(){return T.createElement("div",{className:"App"},T.createElement("div",{className:"app-container"},T.createElement("div",{className:"left-side-section"},T.createElement(Ar,null),T.createElement($e,null),T.createElement(mr,null)),T.createElement("div",{className:"main-section"},T.createElement(Oe,null),T.createElement("div",{className:"main-section-container"},T.createElement(yr,{pauseSong:this.pauseSong,resumeSong:this.resumeSong})," ",T.createElement(pr,{pauseSong:this.pauseSong,resumeSong:this.resumeSong,audioControl:this.audioControl}))),T.createElement(qe,{stopSong:this.stopSong,pauseSong:this.pauseSong,resumeSong:this.resumeSong,audioControl:this.audioControl})))}};m(M,"audio");M.propTypes={token:w.string,fetchUser:w.func,setToken:w.func,pauseSong:w.func,playSong:w.func,stopSong:w.func,resumeSong:w.func,volume:w.number};var Nt=e=>({token:e.tokenReducer.token,volume:e.soundReducer.volume}),Ct=e=>At({fetchUser:me,setToken:ge,playSong:Pe,stopSong:Ne,pauseSong:Ce,resumeSong:ve},e),Pr=Pt(Nt,Ct)(M);var bt=xt(de,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),wt(kt.default));vt.render(Nr.createElement(Rt,{store:bt},Nr.createElement(Pr,null)),document.getElementById("root"));
